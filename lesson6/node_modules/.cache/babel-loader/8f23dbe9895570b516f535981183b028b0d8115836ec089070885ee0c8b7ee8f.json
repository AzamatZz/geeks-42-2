{"ast":null,"code":"import React,{useEffect,useState}from'react';import TodoList from'../components/todoList/TodoList';import Button from'../components/button/Button';import Modal from'../components/modal/Modal';import Pagination from'../components/pagination/Pagination';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TodoPage=()=>{const[show,setShow]=useState(false);const[offset,setOffset]=useState(0);console.log(offset,'offset');const[show2,setShow2]=useState(false);const[name,setName]=useState('');const[inputValue,setInputValue]=useState('');const[todoList,setTodoList]=useState([]);const handleInput=event=>{setInputValue(event.target.value);};const handleAdd=()=>{console.log('add');setTodoList(prevState=>[...prevState,{id:todoList.length===0?1:todoList[todoList.length-1].id+1,title:inputValue,completed:false}]);};const handleEdit=todoEdit=>{console.log(todoEdit);todoList.map(todo=>{if(todoEdit.id===todo.id)return todo.title=todoEdit.title;});setTodoList([...todoList]);};const handleDone=id=>{setTodoList(todoList.map(todo=>{if(id===todo.id){return todo.completed=!todo.completed;}}));setTodoList([...todoList]);};const handleDelete=id=>{setTodoList(todoList.filter(todo=>todo.id!==id));};const handleShow=name=>{setName(name);if(name==='show')setShow(prevState=>!prevState);if(name==='show2')setShow2(prevState=>!prevState);};const[limit,setLimit]=useState(4);console.log(limit,'limit ');const page=offset/Number(limit)+1;const handleNext=()=>{setOffset(prevState=>prevState+Number(limit));};const handlePrev=()=>{setOffset(prevState=>prevState-Number(limit));};const fetchApi=async()=>{try{const response=await fetch(`https://jsonplaceholder.typicode.com/todos?_limit=${limit}&_start=${offset}`);return await response.json();}catch(e){console.log(e);}finally{console.log('finally');}};useEffect(()=>{fetchApi().then(data=>setTodoList(data));},[offset,limit]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{type:\"number\",onChange:event=>setLimit(event.target.value)}),/*#__PURE__*/_jsx(Pagination,{page:page,next:handleNext,prev:handlePrev}),/*#__PURE__*/_jsx(TodoList,{todoList:todoList,handleDone:handleDone,handleDelete:handleDelete,handleEdit:handleEdit}),/*#__PURE__*/_jsx(Button,{name:'Открыть',action:()=>handleShow('show')}),/*#__PURE__*/_jsx(Button,{name:'Открыть2',action:()=>handleShow('show2')}),show&&/*#__PURE__*/_jsx(Modal,{handleShow:handleShow,name:name,handleInput:handleInput,handleAdd:handleAdd,children:/*#__PURE__*/_jsx(\"h1\",{children:\"Hello\"})}),show2&&/*#__PURE__*/_jsx(Modal,{handleShow:handleShow,name:name,children:/*#__PURE__*/_jsx(\"h1\",{children:\"Hello2\"})})]});};export default TodoPage;","map":{"version":3,"names":["React","useEffect","useState","TodoList","Button","Modal","Pagination","jsx","_jsx","jsxs","_jsxs","TodoPage","show","setShow","offset","setOffset","console","log","show2","setShow2","name","setName","inputValue","setInputValue","todoList","setTodoList","handleInput","event","target","value","handleAdd","prevState","id","length","title","completed","handleEdit","todoEdit","map","todo","handleDone","handleDelete","filter","handleShow","limit","setLimit","page","Number","handleNext","handlePrev","fetchApi","response","fetch","json","e","then","data","children","type","onChange","next","prev","action"],"sources":["C:/Users/vip_AZA/WebstormProjects/geeks-42-2/lesson6/src/pages/TodoPage.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport TodoList from '../components/todoList/TodoList';\r\nimport Button from '../components/button/Button';\r\nimport Modal from '../components/modal/Modal';\r\nimport Pagination from '../components/pagination/Pagination';\r\n\r\nconst TodoPage = () => {\r\n    const [ show, setShow ] = useState(false);\r\n    const [ offset, setOffset ] = useState(0);\r\n    console.log(offset,'offset');\r\n    const [ show2, setShow2 ] = useState(false);\r\n    const [ name, setName ] = useState('');\r\n    const [ inputValue, setInputValue ] = useState('');\r\n    const [ todoList, setTodoList ] = useState([]);\r\n\r\n    const handleInput = (event) => {\r\n        setInputValue(event.target.value);\r\n    };\r\n\r\n    const handleAdd = () => {\r\n        console.log('add');\r\n        setTodoList(prevState => [ ...prevState, {\r\n            id: todoList.length === 0 ? 1 : todoList[ todoList.length - 1 ].id + 1,\r\n            title: inputValue,\r\n            completed: false\r\n        } ]);\r\n    };\r\n\r\n    const handleEdit = (todoEdit) => {\r\n        console.log(todoEdit);\r\n        todoList.map(todo=> {\r\n            if (todoEdit.id === todo.id) return todo.title=todoEdit.title\r\n        })\r\n        setTodoList([ ...todoList ]);\r\n    }\r\n\r\n    const handleDone = (id) => {\r\n        setTodoList(todoList.map(todo => {\r\n            if (id === todo.id) {\r\n                return todo.completed = !todo.completed;\r\n            }\r\n        }))\r\n        setTodoList([ ...todoList ]);\r\n    };\r\n\r\n    const handleDelete = (id) => {\r\n        setTodoList(todoList.filter(todo => todo.id !== id));\r\n    };\r\n    const handleShow = (name) => {\r\n        setName(name);\r\n        if (name === 'show') setShow(prevState => !prevState);\r\n        if (name === 'show2') setShow2(prevState => !prevState);\r\n    };\r\n\r\n    const [limit, setLimit] = useState(4)\r\n    console.log(limit,'limit ');\r\n    const page = (offset / Number(limit))+1\r\n    const handleNext = () => {\r\n        setOffset(prevState => prevState+Number(limit))\r\n    }\r\n    const handlePrev = () => {\r\n        setOffset(prevState => prevState-Number(limit))\r\n    }\r\n    const fetchApi = async() => {\r\n        try {\r\n            const response =\r\n                await fetch(`https://jsonplaceholder.typicode.com/todos?_limit=${limit}&_start=${offset}`);\r\n            return await response.json();\r\n        } catch(e) {\r\n            console.log(e);\r\n        } finally {\r\n            console.log('finally');\r\n        }\r\n    };\r\n\r\n    useEffect(()=>{\r\n        fetchApi().then(data=>setTodoList(data))\r\n    },[offset, limit])\r\n\r\n    return (\r\n        <div>\r\n            <input type=\"number\" onChange={(event)=>setLimit(event.target.value)}/>\r\n            <Pagination page={page} next={handleNext}  prev={handlePrev}/>\r\n            <TodoList\r\n                todoList={todoList}\r\n                handleDone={handleDone}\r\n                handleDelete={handleDelete}\r\n                handleEdit={handleEdit}\r\n            />\r\n            <Button name={'Открыть'} action={() => handleShow('show')}/>\r\n            <Button name={'Открыть2'} action={() => handleShow('show2')}/>\r\n            {\r\n                show && <Modal\r\n                    handleShow={handleShow}\r\n                    name={name}\r\n                    handleInput={handleInput}\r\n                    handleAdd={handleAdd}\r\n                >\r\n                    <h1>Hello</h1>\r\n                </Modal>\r\n            }\r\n            {\r\n                show2 && <Modal handleShow={handleShow} name={name}>\r\n                    <h1>Hello2</h1>\r\n                </Modal>\r\n            }\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default TodoPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}